<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="9UCBtBRg7D0bgeyjFWmZPQQVYCOc6FDR-5rm6oLICt0" />
    
    <!-- for Google -->
    <meta name="description" content="Using Perlin Noise, Boids and Mesh manipulation to create an abstract VR experience." />
    <meta name="keywords" content="Unity3D, VR, Vive, Abstract, Art, Boids, Perlin Noise" />

    <meta name="author" content="Vatsal Ambastha" />
    <meta name="copyright" content="Vatsal Ambastha" />

    <!-- for Facebook -->
    <meta property="og:type" content="article" />
    <meta property="og:url" content="www.vatsalambastha.com/blog/kalaa/page.html" />

    <meta property="og:title" content="Kalaa - VR Art Project" />
    <meta property="og:description" content="Using Perlin Noise, Boids and Mesh manipulation to create an abstract VR experience." />
    <meta property="og:image" content="www.vatsalambastha.com/blog/kalaa/img/header-bg.jpg" />
    
    <meta property="og:site_name" content="VatsalAmbastha.com"/>
    <meta property="article:publisher" content="https://www.facebook.com/vatsalAmbastha" />
    <meta property="article:author" content="https://www.facebook.com/vatsalAmbastha" />

    <!-- for Twitter -->          
    <meta name="twitter:card" content="summary" />

    <meta name="twitter:title" content="Kalaa - VR Art Project" />
    <meta name="twitter:description" content="Using Perlin Noise, Boids and Mesh manipulation to create an abstract VR experience." />
    <meta name="twitter:image" content="www.vatsalambastha.com/blog/kalaa/img/header-bg.jpg" />

    <link rel="shortcut icon" href="../../img/ico.png" type="image/png">

    <script src = "../../js/commons.js"></script>
    <script src = "../../js/blogs.js"></script>
    <script src="../../js/marked.js"></script>
    <script src="../../js/require.js"></script>

    <style>
        @font-face {
            font-family: MainFont;
            src: url('fonts/typewcond_regular.otf');
        }
        
        * {
            font-family: MainFont
        }

        img{
            width:auto;
            max-width: 100%;
        }

        .vid{
            max-width: 90%;
            width:auto;
        }

        .global{
            width:90%;
            margin-left:auto;
            margin-right:auto;
        }
    </style>

</head>

<body onLoad = "Init()" a link="#000000" vlink="#000000" style="background-color:rgb(255, 255, 255)" text="#3f3f3f" class="global">
    <div id="nav-bar"></div>
    <div id="header"></div>
    <div id="content">
        <p align="left">
            <font size="6">
                I've dabbled a bit in and out of art for the last one year. And although I have not made anything too impressive even as per my biased self evaluation I've had a lot of fun doing that. So when a client posted about their artistic vision needed be realized in virtual reality I was definitely interested.
                <BR><BR>
                    Luis, a Peru based artist wanted an art concept to be made into VR for the HTC Vive. The piece was about conciousness and <a href="https://en.wikipedia.org/wiki/Quantum_foam"><u>Quantum foam</u></a>. It's represented using an erratic environment (which represents quantum foam) and eyes flocking like school of fish in air which stare back at you when you stare at them (I believe this is for conciousness).
                <BR><BR>
                Being for the Vive, the great thing was that a lot of heavy stuff can be put in the scene and the PC should not have a problem playing it. Here's what the end result looked like.
                <BR><BR>
                <img src="img/kalaa-1.jpg">
                <i><blockquote>Light color sci-fi theme, the one we went with eventually.</blockquote></i>
                <img src="img/kalaa-2.jpg">
                <i><blockquote>Dark Color Theme</blockquote></i>
                
                To break down the development process, the project mostly involved Boid algorithms, Mesh manipulation based on Perlin Noise and some particle effects and light shafts.
                
                <h2>BOIDS</h2>
                    I first came across the concept of Boids in 2011 or so and never really used it until now. Much of the early work on them was done by Craig Reynolds for animation and motion pictures, like simulating <a href="https://www.youtube.com/watch?v=jCVwdeAobYc"><u>bats</u></a> and <a href="https://www.youtube.com/watch?v=Mo_1rAaj7FE"><u>penguins</u></a> in the 1987 Batman movie for which he was awarded by the Academy of Motion Picture Arts and Sciences. There's a lot of material on Boids and some good articles and papers can be found at his website <a href="http://www.red3d.com"><u>red3d.com</u></a>
                <BR><BR>
                    For my project I decided to use <a href="https://github.com/keijiro/Boids"><u>Keijiro Takahashi's Boid project</u></a>. There are other boid solutions for Unity but I went with this one because it was free and the author is well known in the Unity3D community for his great and reliable open source works.
                <BR><BR>
                To put shortly, Boids are an emergent form of behaviour. Meaning, the logic mostly resides in and functions at an individual level and several boids functioning together leads to a collective behaviour (emergence). With some rewriting of Takahashi's code, I was able to get the desired behaviour.
                <BR><BR>
                <img src="img/boids-1.gif">
                <i><blockquote>Standard flocking boid algorithm which I customised.</blockquote></i>
                When the user looks at an eye for a certain number of seconds, the boid slows down and turns towards the camera. It also alerts some boids around it that do the same. Together they slowly float around their positions while they stare back at the user. They don't come to a complete stop, instead their velocity is simply determined by minor Perlin noise values for showing life-like behaviour. The rest of the group continues ahead. 
                <BR><BR>
                As long as screen bounds of the boids along with some padding is at the center of the screen, they stay where they are.
                <BR><BR>
                If the user looks away for a while and the center of the screen is no longer in the rectangle bounds, the boids leave and join their group.
                <BR><BR>
                <img src="img/stay.jpg">
                <i><blockquote>The red boids are the ones that are stationary. Yellow lines show the screen space bounds and blue lines the padded bounds.</blockquote></i>
                
                <h2>THE ENVIRONMENT</h2>
                The environment is an enclosure of 32x32 triangulated sphere where every vertice moves along the radius of the sphere in a way that the distance from the center of the sphere is determined by Perline noise. 
                <img src="img/Perlin-Sphere.png">
                <i><blockquote>Making a vertice on a sphere erratically animate while remaining along it's original radius.</blockquote></i>
                Simple math tells us that in the above diagram 
                <BR><BR>    
                x2/x1 = y2/y1 = z2/z1 = (R + deltaR)/R
                <BR><BR>
                So it boils down to this:
                <BR><BR>
                x2 = x1(R + deltaR)/R;
                <BR><BR>
                y2 = y1(R + deltaR)/R;
                <BR><BR>
                z2 = z1(R + deltaR)/R;
                <BR><BR>
                <img src="img/PerlinGraph.png">
                <i><blockquote>2D Perlin Noise</blockquote></i>
                Where z1, y1 and z1 are constant. R is calculated with Perlin noise over uniform time scale, which leads to smooth and continious animation. To make things erratic, each vertice choses a random deltaR value to begin with. The animation is created by incrementing the value fed to the Perlin function uniformly with time, the result is that the sphere animates erraticaly but seems to have some regularity. Video below.
                    
                <div>
                    <video class="vid" class="vid">
                        <source src="vid/vertex-animation.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                    
                To do away with the regularity, the per frame increment can be determined by Perlin noise itself. Two degrees of noise result in a much more erratic animation, but I chose not to do that.
                    
                <BR><BR>
                Screen Space Ambient Occlusion is used to enhance the erratic nature of the effect. Without SSAO the sphere looks like this.
                        
                <h2>FX</h2>
                Some of the faces from the sphere are removed and light shafts placed on the outside to create beams of light shining in. This gives a nice volumetric effect to the experience. I know nothing about shader programming and used <a href="https://github.com/robertcupisz/LightShafts" target="blank"><u>this solution</u></a>. The problem with that effect is that the shafts originate from a plane and not a sphere and are quite computationaly heavy. 
                
                <BR><BR>
                        
                <img src="img/shaft.jpg">
                <i><blockquote>Volumetric light shafts add to the effect well.</blockquote></i>
                Since there were no spherical shaft casters, I made an approximate sphere by placing 5 shaft sources. The result was the frame rate dropped to 20 something, which is unacceptable for VR. I wanted atleast 45 FPS on my computer so that the client could run it at around 60 as he had a better machine.
                    
                <BR><BR>
                The solution was to simply create a sort of culling arrangement where the shafts that are not within viewing range are turned off. The Github project doesn't support this out of the box. Further enhancement can be done by making the resultion of the light shaft a function of the angle formed between the shafts and the camera. Thus the shafts that are seen at the edge of the vision are of lower resolution. The official repository could probably use this optimization.
                <BR><BR>    
                To give the environment a submerged feeling, a foggy particle system is used. To fill the space, some small spherical particle systems are spawned around the camera.
                    
                <h2>TRINUS VR</h2>
                While developing I came across Trinus VR. A novel solution for cheap PC powered virtual reality. By installing an app on a phone, the gyroscope input of the mobile is transmitted to Unity/game as input for head tracking and the rendered result is passed to the device for display. To keep things fast it is WiFI and USB tethered and works pretty well. For those interested here's their <a href="https://www.trinusvirtualreality.com/" target="blank"><u>official website</u></a>.
                
                <h2>CLOSING</h2>
                While conversing with the client he introduced me to a field that has really captured by attention. They are called Live Simulations and are a blend of art and technology that are used to simulate artificial/cyber life. One person  that is well known for such work is Ian Cheng. <a href="http://www.artnews.com/2016/03/31/the-cyborg-anthropologist-ian-cheng-discusses-his-sentient-art-works/" target="blank"><u></a>Here's an interview with him.</u></a>
                <BR><BR>
                Cheng's work is really fascinating and studying it should take up good amount of my time going forward. I'm also thinking of improving Takahashi's Boid project and releasing it.
                <BR><BR>    
                But before that I have another VR art project that involves adapting a surrealistic painting for the GearVR and I am absolutely psyched about it! I'm also converting some of my handmade (almost) art to VR experiences.
                    
            </font>
        </p>
    </div>
    <div id="page-footer"></div>
    
    <script>
        // TODO: Set index
        var BLOG_INDEX = 5;

        function Init(){
            initTitle();
            initNavBar();
            initHeader();   
            initFooter();
        }
        
        function initTitle(){
            document.title = blogPosts[BLOG_INDEX][0] + " | Vatsal Ambastha's Blog";
        }

        function initNavBar(){
            document.getElementById("nav-bar").appendChild(createNavBar());
        }

        function initHeader(){
            var header = blogPosts[BLOG_INDEX][0];          
            document.getElementById("header").appendChild(createBlogHeader(header, blogPosts[BLOG_INDEX][2]));
            document.getElementById("header").appendChild(createFromHTML(`<br><br>`));
            /*
            document.getElementById("header").appendChild(createFromHTML(`
                <center>
                    <div class="crop">
                        <img src="img/header-bg.jpg"></img>
                    </div
                </center>
            `));
            */
        }

        function initFooter(){
            document.getElementById("page-footer").appendChild(createFooter());
        }

    </script>

</body>

</html>
